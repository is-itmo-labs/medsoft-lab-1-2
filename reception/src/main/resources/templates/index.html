<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Reception</title>
</head>
<body class="p-8">
<div class="max-w-md mx-auto">
    <h1 class="text-2xl font-bold mb-4">Reception — Добавить пациента</h1>
    <form id="addForm" class="space-y-2">
        <input id="firstName" placeholder="Имя" class="border p-2 w-full"/>
        <input id="lastName" placeholder="Фамилия" class="border p-2 w-full"/>
        <input id="birthDate" type="date" class="border p-2 w-full"/>
        <button class="bg-blue-500 text-white px-4 py-2 rounded">Добавить</button>
    </form>

    <h2 class="text-xl mt-6">Удалить пациента (id)</h2>
    <div class="flex gap-2 mt-2">
        <input id="delId" placeholder="id" class="border p-2 flex-1"/>
        <button id="delBtn" class="bg-red-500 text-white px-4 py-2 rounded">Удалить</button>
    </div>

    <div id="msg" class="mt-4 text-sm text-green-700"></div>
</div>

<script>
    const base = window.location.origin; // предполагаем что UI и API в одном хосте/порте при разработке
    document.getElementById('addForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const firstName = document.getElementById('firstName').value;
      const lastName = document.getElementById('lastName').value;
      const birthDate = document.getElementById('birthDate').value;
      const res = await fetch(base + '/api/patients', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({firstName, lastName, birthDate})
      });
      if (res.status === 201) {
        document.getElementById('msg').innerText = 'Пациент добавлен';
      } else {
        document.getElementById('msg').innerText = 'Ошибка';
      }
    });

    document.getElementById('delBtn').addEventListener('click', async () => {
      const id = document.getElementById('delId').value;
      if (!id) return;
      const res = await fetch(base + '/api/patients/' + id, {method: 'DELETE'});
      if (res.status === 204) {
        document.getElementById('msg').innerText = 'Пациент удалён';
      } else {
        document.getElementById('msg').innerText = 'Ошибка удаления';
      }
    });
</script>
</body>
</html>
